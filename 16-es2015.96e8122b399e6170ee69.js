(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"ct+p":function(n,t,i){"use strict";i.r(t),i.d(t,"HomePageModule",(function(){return C}));var e=i("ofXK"),o=i("TEn/"),c=i("3Pt+"),b=i("tyNb"),a=i("mrSG"),r=i("fXoL");let l=(()=>{class n{constructor(){}darkModeToggle(n){this.isChecked=n,document.body.classList.toggle("dark",n)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=r.Db({type:n,selectors:[["app-options-popover"]],decls:5,vars:1,consts:[[3,"checked","ionChange"]],template:function(n,t){1&n&&(r.Mb(0,"ion-list"),r.Mb(1,"ion-item"),r.Mb(2,"ion-label"),r.fc(3,"Toggle Dark Mode"),r.Lb(),r.Mb(4,"ion-toggle",0),r.Ub("ionChange",(function(n){return t.darkModeToggle(n.detail.checked)})),r.Lb(),r.Lb(),r.Lb()),2&n&&(r.zb(4),r.Zb("checked",t.isChecked))},directives:[o.q,o.m,o.p,o.u,o.a],styles:[""]}),n})();const s=["content"];function u(n,t){1&n&&(r.Mb(0,"ion-row"),r.Mb(1,"ion-col",14),r.Mb(2,"ion-item"),r.Mb(3,"ion-label",15),r.fc(4,"AC"),r.Lb(),r.Lb(),r.Lb(),r.Mb(5,"ion-col",14),r.Mb(6,"ion-item"),r.Mb(7,"ion-label",15),r.fc(8,"DPR"),r.Lb(),r.Lb(),r.Lb(),r.Lb())}function g(n,t){if(1&n&&(r.Mb(0,"ion-list"),r.Mb(1,"ion-item"),r.Mb(2,"ion-label"),r.fc(3),r.Lb(),r.Lb(),r.Lb()),2&n){const n=t.$implicit;r.zb(3),r.gc(n)}}function d(n,t){if(1&n&&(r.Mb(0,"ion-list"),r.Mb(1,"ion-item"),r.Mb(2,"ion-label"),r.fc(3),r.Lb(),r.Lb(),r.Lb()),2&n){const n=t.$implicit;r.zb(3),r.gc(n)}}function m(n,t){if(1&n&&(r.Mb(0,"ion-row"),r.Mb(1,"ion-col",14),r.ec(2,g,4,1,"ion-list",12),r.Lb(),r.Mb(3,"ion-col",14),r.ec(4,d,4,1,"ion-list",12),r.Lb(),r.Lb()),2&n){const n=r.Wb();r.zb(2),r.Zb("ngForOf",n.acArray),r.zb(2),r.Zb("ngForOf",n.results)}}function M(n,t){1&n&&r.Kb(0,"ion-icon",27)}function f(n,t){1&n&&r.Kb(0,"ion-icon",28)}function p(n,t){if(1&n){const n=r.Nb();r.Mb(0,"ion-button",29),r.Ub("click",(function(){r.bc(n);const t=r.Wb().index;return r.Wb().remove(t)})),r.Kb(1,"ion-icon",30),r.Lb()}}function h(n,t){if(1&n){const n=r.Nb();r.Mb(0,"ion-item-group"),r.Mb(1,"ion-item-divider"),r.Mb(2,"ion-button",16),r.Ub("click",(function(){r.bc(n);const i=t.index;return r.Wb().toggleReveal(i)})),r.ec(3,M,1,0,"ion-icon",17),r.ec(4,f,1,0,"ion-icon",18),r.Lb(),r.Mb(5,"ion-label"),r.fc(6),r.Lb(),r.Mb(7,"ion-button",19),r.Ub("click",(function(){r.bc(n);const i=t.index;return r.Wb().duplicate(i)})),r.Kb(8,"ion-icon",20),r.Lb(),r.ec(9,p,2,0,"ion-button",21),r.Lb(),r.Mb(10,"div",22),r.Mb(11,"ion-item"),r.Mb(12,"ion-label",10),r.fc(13,"Hit bonus"),r.Lb(),r.Mb(14,"ion-input",23),r.Ub("ngModelChange",(function(i){r.bc(n);const e=t.index;return r.Wb().attacks[e].hit=i})),r.Lb(),r.Lb(),r.Mb(15,"ion-item"),r.Mb(16,"ion-label",10),r.fc(17,"Damage"),r.Lb(),r.Mb(18,"ion-input",24),r.Ub("ngModelChange",(function(i){r.bc(n);const e=t.index;return r.Wb().attacks[e].damage=i})),r.Lb(),r.Lb(),r.Mb(19,"ion-item"),r.Mb(20,"ion-label",10),r.fc(21,"Precision damage"),r.Lb(),r.Mb(22,"ion-input",24),r.Ub("ngModelChange",(function(i){r.bc(n);const e=t.index;return r.Wb().attacks[e].precisionDamage=i})),r.Lb(),r.Lb(),r.Mb(23,"ion-item"),r.Mb(24,"ion-label",10),r.fc(25,"Critical range"),r.Lb(),r.Mb(26,"ion-input",25),r.Ub("ngModelChange",(function(i){r.bc(n);const e=t.index;return r.Wb().attacks[e].critRange=i})),r.Lb(),r.Lb(),r.Mb(27,"ion-item"),r.Mb(28,"ion-label",10),r.fc(29,"Critical multiplier"),r.Lb(),r.Mb(30,"ion-input",26),r.Ub("ngModelChange",(function(i){r.bc(n);const e=t.index;return r.Wb().attacks[e].critMul=i})),r.Lb(),r.Lb(),r.Mb(31,"ion-item"),r.Mb(32,"ion-label",10),r.fc(33,"Extra critical damage"),r.Lb(),r.Mb(34,"ion-input",24),r.Ub("ngModelChange",(function(i){r.bc(n);const e=t.index;return r.Wb().attacks[e].critDamage=i})),r.Lb(),r.Lb(),r.Lb(),r.Lb()}if(2&n){const n=t.$implicit,i=t.index,e=r.Wb();r.zb(3),r.Zb("ngIf",n.visible),r.zb(1),r.Zb("ngIf",!n.visible),r.zb(2),r.hc("Attack ",i+1,""),r.zb(3),r.Zb("ngIf",e.attacks.length>=2),r.zb(1),r.Zb("hidden",!n.visible),r.zb(4),r.Zb("ngModel",e.attacks[i].hit),r.zb(4),r.Zb("ngModel",e.attacks[i].damage),r.zb(4),r.Zb("ngModel",e.attacks[i].precisionDamage),r.zb(4),r.Zb("ngModel",e.attacks[i].critRange),r.zb(4),r.Zb("ngModel",e.attacks[i].critMul),r.zb(4),r.Zb("ngModel",e.attacks[i].critDamage)}}const L=[{path:"",component:(()=>{class n{constructor(n){this.popoverController=n,this.attacks=[],this.isChecked=window.matchMedia("(prefers-color-scheme: dark)").matches,document.body.classList.toggle("dark",this.isChecked),this.attacks=[{hit:null,damage:null,precisionDamage:null,critRange:null,critMul:null,critDamage:null,visible:!0}]}calculate(){const n=this.attacks.filter(n=>n.hit&&n.damage);if(n.length>0){const t=n.map(n=>({hit:n.hit,damage:this.parse(n.damage),precisionDamage:this.parse(n.precisionDamage),critRange:n.critRange?n.critRange:20,critMul:n.critMul?n.critMul:2,critDamage:this.parse(n.critDamage)}));this.acArray=Array(this.maxAc-this.minAc+1).fill(this.minAc).map((n,t)=>n+t),this.results=this.acArray.map(n=>(console.log(t),t.reduce((t,i)=>{const e=this.getHitChance(i.hit,n),o=this.getCritChance(i.critRange);return e*(i.damage+i.precisionDamage)+o*e*(i.damage+i.critDamage)*(i.critMul-1)+t},0))).map(n=>+n.toFixed(4)),this.content.scrollToTop(500)}}add(){this.attacks.push({hit:null,damage:null,precisionDamage:null,critRange:null,critMul:null,critDamage:null,visible:!0})}remove(n){this.attacks.splice(n,1)}duplicate(n){this.attacks.push(Object.assign({},this.attacks[n]))}toggleReveal(n){this.attacks[n].visible=!this.attacks[n].visible}openPopover(n){return Object(a.a)(this,void 0,void 0,(function*(){const t=yield this.popoverController.create({component:l,cssClass:"my-custom-class",translucent:!0,showBackdrop:!1,event:n,componentProps:{isChecked:this.isChecked}});return t.onDidDismiss().then(()=>{this.isChecked=document.body.classList.contains("dark")}),yield t.present()}))}parse(n){if(!n)return 0;const t=n.replace(/ /g,""),i=t.indexOf("d"),e=t.indexOf("+"),o=t.indexOf("-"),c=-1===e?o:e,b=0===i?1:parseInt(t.substring(0,i),10),a=-1===c?0:parseInt(t.substring(c+1),10),r=-1===c?parseInt(t.substring(i+1),10):parseInt(t.substring(i+1,c),10);return b*(1===r?r:(r+1)/2)+a}getHitChance(n,t){return Math.max(Math.min((21-(t-n))/20,.95),.05)}getCritChance(n){return(21-n)/20}}return n.\u0275fac=function(t){return new(t||n)(r.Jb(o.A))},n.\u0275cmp=r.Db({type:n,selectors:[["app-home"]],viewQuery:function(n,t){var i;1&n&&r.ic(s,!0),2&n&&r.ac(i=r.Vb())&&(t.content=i.first)},decls:33,vars:7,consts:[[3,"translucent"],["size","large"],["slot","end"],[3,"click"],["name","settings-outline"],[3,"fullscreen"],["content",""],[4,"ngIf"],["offset-md","3","size-md","6"],["lines","none"],["position","floating","color","primary"],["type","number","min","0",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["color","primary",3,"click"],["push-md","2","size-md","4"],["color","primary"],["slot","start",3,"click"],["name","chevron-forward-outline",4,"ngIf"],["name","chevron-down-outline",4,"ngIf"],["slot","end",1,"margin-left-small",3,"click"],["name","duplicate-outline"],["class","margin-left-small","slot","end","color","danger",3,"click",4,"ngIf"],[3,"hidden"],["type","number",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["type","number","min","2","max","20",3,"ngModel","ngModelChange"],["type","number","min","1",3,"ngModel","ngModelChange"],["name","chevron-forward-outline"],["name","chevron-down-outline"],["slot","end","color","danger",1,"margin-left-small",3,"click"],["name","close-outline"]],template:function(n,t){1&n&&(r.Mb(0,"ion-header",0),r.Mb(1,"ion-toolbar"),r.Mb(2,"ion-title",1),r.fc(3," Pathfinder 1e Dpr Calculator "),r.Lb(),r.Mb(4,"ion-buttons",2),r.Mb(5,"ion-button",3),r.Ub("click",(function(n){return t.openPopover(n)})),r.Kb(6,"ion-icon",4),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Mb(7,"ion-content",5,6),r.Mb(9,"ion-grid"),r.ec(10,u,9,0,"ion-row",7),r.ec(11,m,5,2,"ion-row",7),r.Mb(12,"ion-row"),r.Mb(13,"ion-col",8),r.Mb(14,"ion-card"),r.Mb(15,"ion-card-content"),r.Mb(16,"ion-list",9),r.Mb(17,"ion-item-group"),r.Mb(18,"ion-item-divider"),r.Mb(19,"ion-label"),r.fc(20,"Target Armor Class"),r.Lb(),r.Lb(),r.Mb(21,"ion-item"),r.Mb(22,"ion-label",10),r.fc(23,"Min"),r.Lb(),r.Mb(24,"ion-input",11),r.Ub("ngModelChange",(function(n){return t.minAc=n})),r.Lb(),r.Lb(),r.Mb(25,"ion-item"),r.Mb(26,"ion-label",10),r.fc(27,"Max"),r.Lb(),r.Mb(28,"ion-input",11),r.Ub("ngModelChange",(function(n){return t.maxAc=n})),r.Lb(),r.Lb(),r.Lb(),r.ec(29,h,35,11,"ion-item-group",12),r.Mb(30,"ion-item",9),r.Mb(31,"ion-button",13),r.Ub("click",(function(){return t.calculate()})),r.fc(32,"Calculate"),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Lb()),2&n&&(r.Zb("translucent",!0),r.zb(7),r.Zb("fullscreen",!0),r.zb(3),r.Zb("ngIf",!!t.results&&!!t.acArray),r.zb(1),r.Zb("ngIf",!!t.results&&!!t.acArray),r.zb(13),r.Zb("ngModel",t.minAc),r.zb(4),r.Zb("ngModel",t.maxAc),r.zb(1),r.Zb("ngForOf",t.attacks))},directives:[o.j,o.v,o.t,o.d,o.c,o.k,o.h,o.i,e.i,o.s,o.g,o.e,o.f,o.q,o.o,o.n,o.p,o.m,o.l,o.y,c.d,c.e,e.h,o.B],styles:[".margin-left-small[_ngcontent-%COMP%]{--margin-left:2px;margin-left:2px}"]}),n})()}];let k=(()=>{class n{}return n.\u0275mod=r.Hb({type:n}),n.\u0275inj=r.Gb({factory:function(t){return new(t||n)},imports:[[b.i.forChild(L)],b.i]}),n})(),C=(()=>{class n{}return n.\u0275mod=r.Hb({type:n}),n.\u0275inj=r.Gb({factory:function(t){return new(t||n)},imports:[[e.b,c.a,o.w,k]]}),n})()}}]);