function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(n,e){for(var i=0;i<e.length;i++){var t=e[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function _createClass(n,e,i){return e&&_defineProperties(n.prototype,e),i&&_defineProperties(n,i),n}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"ct+p":function(n,e,i){"use strict";i.r(e),i.d(e,"HomePageModule",(function(){return x}));var t,o=i("ofXK"),a=i("TEn/"),c=i("3Pt+"),r=i("tyNb"),b=i("mrSG"),l=i("fXoL"),s=((t=function(){function n(){_classCallCheck(this,n)}return _createClass(n,[{key:"darkModeToggle",value:function(n){this.isChecked=n,document.body.classList.toggle("dark",n)}},{key:"ngOnInit",value:function(){}}]),n}()).\u0275fac=function(n){return new(n||t)},t.\u0275cmp=l.Db({type:t,selectors:[["app-options-popover"]],decls:5,vars:1,consts:[[3,"checked","ionChange"]],template:function(n,e){1&n&&(l.Mb(0,"ion-list"),l.Mb(1,"ion-item"),l.Mb(2,"ion-label"),l.fc(3,"Toggle Dark Mode"),l.Lb(),l.Mb(4,"ion-toggle",0),l.Ub("ionChange",(function(n){return e.darkModeToggle(n.detail.checked)})),l.Lb(),l.Lb(),l.Lb()),2&n&&(l.zb(4),l.Zb("checked",e.isChecked))},directives:[a.q,a.m,a.p,a.u,a.a],styles:[""]}),t),u=["content"];function g(n,e){1&n&&(l.Mb(0,"ion-row"),l.Mb(1,"ion-col",14),l.Mb(2,"ion-item"),l.Mb(3,"ion-label",15),l.fc(4,"AC"),l.Lb(),l.Lb(),l.Lb(),l.Mb(5,"ion-col",14),l.Mb(6,"ion-item"),l.Mb(7,"ion-label",15),l.fc(8,"DPR"),l.Lb(),l.Lb(),l.Lb(),l.Lb())}function f(n,e){if(1&n&&(l.Mb(0,"ion-list"),l.Mb(1,"ion-item"),l.Mb(2,"ion-label"),l.fc(3),l.Lb(),l.Lb(),l.Lb()),2&n){var i=e.$implicit;l.zb(3),l.gc(i)}}function d(n,e){if(1&n&&(l.Mb(0,"ion-list"),l.Mb(1,"ion-item"),l.Mb(2,"ion-label"),l.fc(3),l.Lb(),l.Lb(),l.Lb()),2&n){var i=e.$implicit;l.zb(3),l.gc(i)}}function m(n,e){if(1&n&&(l.Mb(0,"ion-row"),l.Mb(1,"ion-col",14),l.ec(2,f,4,1,"ion-list",12),l.Lb(),l.Mb(3,"ion-col",14),l.ec(4,d,4,1,"ion-list",12),l.Lb(),l.Lb()),2&n){var i=l.Wb();l.zb(2),l.Zb("ngForOf",i.acArray),l.zb(2),l.Zb("ngForOf",i.results)}}function M(n,e){1&n&&l.Kb(0,"ion-icon",27)}function p(n,e){1&n&&l.Kb(0,"ion-icon",28)}function h(n,e){if(1&n){var i=l.Nb();l.Mb(0,"ion-button",29),l.Ub("click",(function(){l.bc(i);var n=l.Wb().index;return l.Wb().remove(n)})),l.Kb(1,"ion-icon",30),l.Lb()}}function k(n,e){if(1&n){var i=l.Nb();l.Mb(0,"ion-item-group"),l.Mb(1,"ion-item-divider"),l.Mb(2,"ion-button",16),l.Ub("click",(function(){l.bc(i);var n=e.index;return l.Wb().toggleReveal(n)})),l.ec(3,M,1,0,"ion-icon",17),l.ec(4,p,1,0,"ion-icon",18),l.Lb(),l.Mb(5,"ion-label"),l.fc(6),l.Lb(),l.Mb(7,"ion-button",19),l.Ub("click",(function(){l.bc(i);var n=e.index;return l.Wb().duplicate(n)})),l.Kb(8,"ion-icon",20),l.Lb(),l.ec(9,h,2,0,"ion-button",21),l.Lb(),l.Mb(10,"div",22),l.Mb(11,"ion-item"),l.Mb(12,"ion-label",10),l.fc(13,"Hit bonus"),l.Lb(),l.Mb(14,"ion-input",23),l.Ub("ngModelChange",(function(n){l.bc(i);var t=e.index;return l.Wb().attacks[t].hit=n})),l.Lb(),l.Lb(),l.Mb(15,"ion-item"),l.Mb(16,"ion-label",10),l.fc(17,"Damage"),l.Lb(),l.Mb(18,"ion-input",24),l.Ub("ngModelChange",(function(n){l.bc(i);var t=e.index;return l.Wb().attacks[t].damage=n})),l.Lb(),l.Lb(),l.Mb(19,"ion-item"),l.Mb(20,"ion-label",10),l.fc(21,"Precision damage"),l.Lb(),l.Mb(22,"ion-input",24),l.Ub("ngModelChange",(function(n){l.bc(i);var t=e.index;return l.Wb().attacks[t].precisionDamage=n})),l.Lb(),l.Lb(),l.Mb(23,"ion-item"),l.Mb(24,"ion-label",10),l.fc(25,"Critical range"),l.Lb(),l.Mb(26,"ion-input",25),l.Ub("ngModelChange",(function(n){l.bc(i);var t=e.index;return l.Wb().attacks[t].critRange=n})),l.Lb(),l.Lb(),l.Mb(27,"ion-item"),l.Mb(28,"ion-label",10),l.fc(29,"Critical multiplier"),l.Lb(),l.Mb(30,"ion-input",26),l.Ub("ngModelChange",(function(n){l.bc(i);var t=e.index;return l.Wb().attacks[t].critMul=n})),l.Lb(),l.Lb(),l.Mb(31,"ion-item"),l.Mb(32,"ion-label",10),l.fc(33,"Extra critical damage"),l.Lb(),l.Mb(34,"ion-input",24),l.Ub("ngModelChange",(function(n){l.bc(i);var t=e.index;return l.Wb().attacks[t].critDamage=n})),l.Lb(),l.Lb(),l.Lb(),l.Lb()}if(2&n){var t=e.$implicit,o=e.index,a=l.Wb();l.zb(3),l.Zb("ngIf",t.visible),l.zb(1),l.Zb("ngIf",!t.visible),l.zb(2),l.hc("Attack ",o+1,""),l.zb(3),l.Zb("ngIf",a.attacks.length>=2),l.zb(1),l.Zb("hidden",!t.visible),l.zb(4),l.Zb("ngModel",a.attacks[o].hit),l.zb(4),l.Zb("ngModel",a.attacks[o].damage),l.zb(4),l.Zb("ngModel",a.attacks[o].precisionDamage),l.zb(4),l.Zb("ngModel",a.attacks[o].critRange),l.zb(4),l.Zb("ngModel",a.attacks[o].critMul),l.zb(4),l.Zb("ngModel",a.attacks[o].critDamage)}}var L,v,C,y=[{path:"",component:(L=function(){function n(e){_classCallCheck(this,n),this.popoverController=e,this.attacks=[],this.isChecked=window.matchMedia("(prefers-color-scheme: dark)").matches,document.body.classList.toggle("dark",this.isChecked),this.attacks=[{hit:null,damage:null,precisionDamage:null,critRange:null,critMul:null,critDamage:null,visible:!0}]}return _createClass(n,[{key:"calculate",value:function(){var n=this,e=this.attacks.filter((function(n){return n.hit&&n.damage}));if(e.length>0){var i=e.map((function(e){return{hit:e.hit,damage:n.parse(e.damage),precisionDamage:n.parse(e.precisionDamage),critRange:e.critRange?e.critRange:20,critMul:e.critMul?e.critMul:2,critDamage:n.parse(e.critDamage)}}));this.acArray=Array(this.maxAc-this.minAc+1).fill(this.minAc).map((function(n,e){return n+e})),this.results=this.acArray.map((function(e){return console.log(i),i.reduce((function(i,t){var o=n.getHitChance(t.hit,e),a=n.getCritChance(t.critRange);return o*(t.damage+t.precisionDamage)+a*o*(t.damage+t.critDamage)*(t.critMul-1)+i}),0)})).map((function(n){return+n.toFixed(4)})),this.content.scrollToTop(500)}}},{key:"add",value:function(){this.attacks.push({hit:null,damage:null,precisionDamage:null,critRange:null,critMul:null,critDamage:null,visible:!0})}},{key:"remove",value:function(n){this.attacks.splice(n,1)}},{key:"duplicate",value:function(n){this.attacks.push(Object.assign({},this.attacks[n]))}},{key:"toggleReveal",value:function(n){this.attacks[n].visible=!this.attacks[n].visible}},{key:"openPopover",value:function(n){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var i,t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.popoverController.create({component:s,cssClass:"my-custom-class",translucent:!0,showBackdrop:!1,event:n,componentProps:{isChecked:this.isChecked}});case 2:return(i=e.sent).onDidDismiss().then((function(){t.isChecked=document.body.classList.contains("dark")})),e.next=6,i.present();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"parse",value:function(n){if(!n)return 0;var e=n.replace(/ /g,""),i=e.indexOf("d"),t=e.indexOf("+"),o=e.indexOf("-"),a=-1===t?o:t,c=0===i?1:parseInt(e.substring(0,i),10),r=-1===a?0:parseInt(e.substring(a+1),10),b=-1===a?parseInt(e.substring(i+1),10):parseInt(e.substring(i+1,a),10);return c*(1===b?b:(b+1)/2)+r}},{key:"getHitChance",value:function(n,e){return Math.max(Math.min((21-(e-n))/20,.95),.05)}},{key:"getCritChance",value:function(n){return(21-n)/20}}]),n}(),L.\u0275fac=function(n){return new(n||L)(l.Jb(a.A))},L.\u0275cmp=l.Db({type:L,selectors:[["app-home"]],viewQuery:function(n,e){var i;1&n&&l.ic(u,!0),2&n&&l.ac(i=l.Vb())&&(e.content=i.first)},decls:33,vars:7,consts:[[3,"translucent"],["size","large"],["slot","end"],[3,"click"],["name","settings-outline"],[3,"fullscreen"],["content",""],[4,"ngIf"],["offset-md","3","size-md","6"],["lines","none"],["position","floating","color","primary"],["type","number","min","0",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["color","primary",3,"click"],["push-md","2","size-md","4"],["color","primary"],["slot","start",3,"click"],["name","chevron-forward-outline",4,"ngIf"],["name","chevron-down-outline",4,"ngIf"],["slot","end",1,"margin-left-small",3,"click"],["name","duplicate-outline"],["class","margin-left-small","slot","end","color","danger",3,"click",4,"ngIf"],[3,"hidden"],["type","number",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["type","number","min","2","max","20",3,"ngModel","ngModelChange"],["type","number","min","1",3,"ngModel","ngModelChange"],["name","chevron-forward-outline"],["name","chevron-down-outline"],["slot","end","color","danger",1,"margin-left-small",3,"click"],["name","close-outline"]],template:function(n,e){1&n&&(l.Mb(0,"ion-header",0),l.Mb(1,"ion-toolbar"),l.Mb(2,"ion-title",1),l.fc(3," Pathfinder 1e Dpr Calculator "),l.Lb(),l.Mb(4,"ion-buttons",2),l.Mb(5,"ion-button",3),l.Ub("click",(function(n){return e.openPopover(n)})),l.Kb(6,"ion-icon",4),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Mb(7,"ion-content",5,6),l.Mb(9,"ion-grid"),l.ec(10,g,9,0,"ion-row",7),l.ec(11,m,5,2,"ion-row",7),l.Mb(12,"ion-row"),l.Mb(13,"ion-col",8),l.Mb(14,"ion-card"),l.Mb(15,"ion-card-content"),l.Mb(16,"ion-list",9),l.Mb(17,"ion-item-group"),l.Mb(18,"ion-item-divider"),l.Mb(19,"ion-label"),l.fc(20,"Target Armor Class"),l.Lb(),l.Lb(),l.Mb(21,"ion-item"),l.Mb(22,"ion-label",10),l.fc(23,"Min"),l.Lb(),l.Mb(24,"ion-input",11),l.Ub("ngModelChange",(function(n){return e.minAc=n})),l.Lb(),l.Lb(),l.Mb(25,"ion-item"),l.Mb(26,"ion-label",10),l.fc(27,"Max"),l.Lb(),l.Mb(28,"ion-input",11),l.Ub("ngModelChange",(function(n){return e.maxAc=n})),l.Lb(),l.Lb(),l.Lb(),l.ec(29,k,35,11,"ion-item-group",12),l.Mb(30,"ion-item",9),l.Mb(31,"ion-button",13),l.Ub("click",(function(){return e.calculate()})),l.fc(32,"Calculate"),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb()),2&n&&(l.Zb("translucent",!0),l.zb(7),l.Zb("fullscreen",!0),l.zb(3),l.Zb("ngIf",!!e.results&&!!e.acArray),l.zb(1),l.Zb("ngIf",!!e.results&&!!e.acArray),l.zb(13),l.Zb("ngModel",e.minAc),l.zb(4),l.Zb("ngModel",e.maxAc),l.zb(1),l.Zb("ngForOf",e.attacks))},directives:[a.j,a.v,a.t,a.d,a.c,a.k,a.h,a.i,o.i,a.s,a.g,a.e,a.f,a.q,a.o,a.n,a.p,a.m,a.l,a.y,c.d,c.e,o.h,a.B],styles:[".margin-left-small[_ngcontent-%COMP%]{--margin-left:2px;margin-left:2px}"]}),L)}],w=((C=function n(){_classCallCheck(this,n)}).\u0275mod=l.Hb({type:C}),C.\u0275inj=l.Gb({factory:function(n){return new(n||C)},imports:[[r.i.forChild(y)],r.i]}),C),x=((v=function n(){_classCallCheck(this,n)}).\u0275mod=l.Hb({type:v}),v.\u0275inj=l.Gb({factory:function(n){return new(n||v)},imports:[[o.b,c.a,a.w,w]]}),v)}}]);